<?phpfunction backup_tables($tables = '*') //backup the whole db by default ('*') OR a single table ('tableName'){include "../config/koneksi.php";  //get all of the tables  if($tables == '*')  {    $tables = array();    $result = mysql_query('SHOW TABLES');    while($row = mysql_fetch_row($result))    {      $tables[] = $row[0];    }  }  else  {    $tables = is_array($tables) ? $tables : explode(',',$tables);  }    //cycle through  foreach($tables as $table)  {    $result = mysql_query("SELECT * FROM `$table`");    $num_fields = mysql_num_fields($result);        $return.= 'DROP TABLE IF EXISTS '.$table.';';    $row2 = mysql_fetch_row(mysql_query('SHOW CREATE TABLE '.$table));    $return.= "\n\n".$row2[1].";\n\n";        for ($i = 0; $i < $num_fields; $i++)     {      while($row = mysql_fetch_row($result))      {        $return.= 'INSERT INTO '.$table.' VALUES(';        for($j=0; $j<$num_fields; $j++)         {          $row[$j] = addslashes($row[$j]);		  //$row[$j] = mysql_real_escape_string($konek, $row[$j]);          if (isset($row[$j])) { $return.= '"'.$row[$j].'"' ; } else { $return.= '""'; }          if ($j<($num_fields-1)) { $return.= ','; }        }        $return.= ");\n";      }    }    $return.="\n";  }    //save file  $handle = fopen('modul/mod_database/backup/db-backup-'.time().'-'.(md5(implode(',',$tables))).'.sql','w+');  $s=0;  if(fwrite($handle,$return)) $s=1;  fclose($handle);  return $s;}function backup_tables_full($tables = '*') //backup the whole db by default ('*') OR a single table ('tableName'){include "../config/koneksi.php";  //get all of the tables  if($tables == '*')  {    $tables = array();    $result = mysql_query('SHOW TABLES');    while($row = mysql_fetch_row($result))    {      $tables[] = $row[0];    }  }  else  {    $tables = is_array($tables) ? $tables : explode(',',$tables);  }    //cycle through  foreach($tables as $table)  {    $result = mysql_query("SELECT * FROM `$table`");    $num_fields = mysql_num_fields($result);        $return.= 'DROP TABLE IF EXISTS '.$table.';';    $row2 = mysql_fetch_row(mysql_query('SHOW CREATE TABLE '.$table));    $return.= "\n\n".$row2[1].";\n\n";        for ($i = 0; $i < $num_fields; $i++)     {      while($row = mysql_fetch_row($result))      {        $return.= 'INSERT INTO '.$table.' VALUES(';        for($j=0; $j<$num_fields; $j++)         {          $row[$j] = addslashes($row[$j]);		  //$row[$j] = mysql_real_escape_string($konek, $row[$j]);          if (isset($row[$j])) { $return.= '"'.$row[$j].'"' ; } else { $return.= '""'; }          if ($j<($num_fields-1)) { $return.= ','; }        }        $return.= ");\n";      }    }    $return.="\n";  }    //save file  $handle = fopen('../dbackup.sql','w+');  $s=0;  if(fwrite($handle,$return)) $s=1;  fclose($handle);  return $s;}?>